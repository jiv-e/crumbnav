/* crumbnav Base Styles */

.no-js {
  //TODO Make no-js mode better.
}

.#{$navClass} {
  position: relative;
  &.#{$rootsOpenClass} {
    .#{$currentClass} {
      .js & {
        display: none;
      }
    }
    .#{$currentClass}.#{$breadcrumbClass}-out-0 {
      display: block;
    }
  }
  .#{$rootsOpenClass} {
    display: block;
    //TODO Refactor?
    &.#{$parentClass}.#{$breadcrumbClass} > a {
      float: none;
    }
  }

  ul {
    position: relative;
    list-style: none;
    padding: 0 0 0 2em;
    .js & {
      padding: 0;
    }
  }
  li {
    position: relative;
    .js & {
      display: none;
    }
    min-height: $elementHeight;
    line-height: $elementHeight;
  }
  li > a {
    position: relative;
    display: block;
    height: 100%;
    white-space: nowrap;
  }

  // Show contextual menu button (+)
  & > ul > .#{$buttonClass},
  .#{$breadcrumbClass}-in-1 > .#{$buttonClass} {
    display: block;
  }
  // Hide contextual menu button (+), if the menu is a second level menu
  .#{$breadcrumbClass}-in-1.#{$breadcrumbClass}-out-0 > .#{$buttonClass} {
    display: none;
  }
  &.#{$closedClass} li.#{$breadcrumbClass} {
    display: block;
  }

  //flexMenu support
  .more {
    position: absolute;
    right: 0;
  }
  .more > ul {
    position: absolute;
    top: $elementHeight;
    right: 0;
    > li {
      display: block;
    }
    .#{$buttonClass} {
      display: none;
    }
  }
}

// Current item
.#{$currentClass} a {
  clear: both;
  // If large:
  .#{$largeClass} & {
    clear: none;
  }
}

.#{$breadcrumbClass}-in-1 {
  //Prevent horizontal contextual links list from
  //overlapping with the main menu
  &.#{$closedClass} {
    padding-right: $elementHeight;
    .#{$buttonClass} {
      display: none;
    }
  }
  .js &.#{$closedClass} > ul {
    //Padding preventing overlap with .more-menu-button
    padding-right: $elementHeight;
  }
}

// Current item siblings
.#{$breadcrumbClass}-in-1 > ul > li {

  // If large and closed:
  .#{$largeClass}.#{$closedClass} & {
    display: inline-block;
    > .#{$buttonClass} {
      display: none;
    }
  }

}

.#{$navTitleClass} {
  display: none;
  height: 50px;
  padding: 0 0 0 $elementHeight;
  line-height: $elementHeight;
  .#{$rootClass} & {
    display: block;
  }
}



//Contextual submenu (+) positioned under the menu button (arrow down)
.#{$breadcrumbClass}-in-1 > .#{$buttonClass} {
  top: $elementHeight;
}

.#{$multipleRootsClass} {
  .#{$rootClass} > a {
    padding-left: $elementHeight;
  }
}

//Make breadcrumb links clickable
.#{$breadcrumbClass}-out-0 > a {z-index: 5;}
.#{$breadcrumbClass}-out-1 > a {z-index: 4;}
.#{$breadcrumbClass}-out-2 > a {z-index: 3;}
.#{$breadcrumbClass}-out-3 > a {z-index: 2;}
.#{$breadcrumbClass}-out-4 > a {z-index: 1;}


.#{$navClass}.#{$openClass} .#{$buttonClass},
.#{$breadcrumbClass}-in-1 .#{$buttonClass},
.#{$buttonClass}.#{$openClass} {
  display: block;
}

// Menu open
.#{$navClass}.#{$openClass} {

  .#{$buttonClass} {
    display: block;
  }
  .#{$breadcrumbClass} > a {
    float: none;
  }
  .#{$breadcrumbClass}-out-1 > .#{$buttonClass} {
    top: 0;
  }
  li.#{$breadcrumbClass}, li.#{$currentClass} {
    display: none;
  }
  li.#{$breadcrumbClass}.#{$openClass},
  li.#{$breadcrumbClass}.#{$openClass} > ul > li,
  li.#{$currentClass}.#{$openClass},
  .#{$breadcrumbClass}-in-1.#{$breadcrumbClass}-out-0 .#{$buttonClass}{
    display: block;
  }

  .#{$breadcrumbClass}-in-1 > .#{$buttonClass} {
    top: 0;
  }
}

.#{$breadcrumbClass}#{$openClass} {
  > ul > li {
    display: block;
  }
}

.#{$parentClass}.#{$breadcrumbClass} {
  > a {
    float: left;
  }
  &-in-1 > a,
  &.#{$currentClass} > a {
    float: none;
    overflow: hidden;
    .#{$largeClass} & {
      float: left;
      overflow: visible;
    }
    .#{$largeClass}.#{$openClass} & {
      float: none;
    }
  }
}

.#{$breadcrumbClass}.#{$openClass} {
  > a {
    float: none;
  }
}
.#{$parentClass}.#{$openClass} {
  > ul > li {
    display: block;
  }
}

.#{$navClass}.#{$multipleRootsClass}.#{$openClass} > ul > li {
  display: block;
}

%button {
  position: absolute;
  z-index: 100;
  top: 0;
  right: 0;
  width: $elementHeight;
  height: $elementHeight;
  display: none;
  cursor: pointer;
  &:hover {
    cursor: pointer;
  }
  > i {
    position: relative;
    height: $elementHeight;
    display: block;
  }
}

.#{$buttonClass} {
  @extend %button;
}

.#{$buttonRootsMenuClass},
.#{$buttonMenuClass} {
  display: block;
  height: $elementHeight;
}

.#{$buttonRootsMenuClass} {
  left: 0;
  right: inherit;
}

//Refactor
//.#{$buttonClass}--more-menu {
.more-menu-button {
  @extend %button;
  display: block;
}
